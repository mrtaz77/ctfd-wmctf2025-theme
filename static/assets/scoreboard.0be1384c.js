import{d as f,c as b,m as o,C as i}from"./index.39750a12.js";import{c as P,m as v,e as y}from"./index.86a4c4d6.js";import"./echarts.7a5d4174.js";function w(t,e,c){let n={title:{left:"center",text:"Top 10 "+(t==="teams"?"Teams":"Users")},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[]},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{containLabel:!0},xAxis:[{type:"time",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter",height:20,top:35,fillerColor:"rgba(233, 236, 241, 0.4)"}],series:[]};const s=Object.keys(e);for(let a=0;a<s.length;a++){const g=[],h=[];for(let r=0;r<e[s[a]].solves.length;r++){g.push(e[s[a]].solves[r].value);const d=f(e[s[a]].solves[r].date);h.push(d.toDate())}const u=P(g);let p=h.map(function(r,d){return[r,u[d]]});n.legend.data.push(e[s[a]].name);const m={name:e[s[a]].name,type:"line",label:{normal:{position:"top"}},itemStyle:{normal:{color:b(e[s[a]].name+e[s[a]].id)}},data:p};n.series.push(m)}return c&&(n=v(n,c)),n}window.Alpine=o;window.CTFd=i;const l=window.scoreboardUpdateInterval||3e5;o.data("ScoreboardDetail",()=>({data:{},show:!0,activeBracket:null,async update(){this.data=await i.pages.scoreboard.getScoreboardDetail(10,this.activeBracket);let t=window.scoreboardChartOptions,e=w(i.config.userMode,this.data,t);y(this.$refs.scoregraph,e),this.show=Object.keys(this.data).length>0},async init(){this.update(),setInterval(()=>{this.update()},l)}}));o.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,currentPage:1,perPage:50,get filteredStandings(){return this.standings.filter(t=>this.activeBracket?t.bracket_id==this.activeBracket:!0)},get totalPages(){return Math.ceil(this.filteredStandings.length/this.perPage)},get paginatedStandings(){const t=(this.currentPage-1)*this.perPage,e=t+this.perPage;return this.filteredStandings.slice(t,e)},get startIndex(){return(this.currentPage-1)*this.perPage},get showingFrom(){return this.filteredStandings.length>0?this.startIndex+1:0},get showingTo(){return Math.min(this.startIndex+this.perPage,this.filteredStandings.length)},goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t)},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},async update(){this.brackets=await i.pages.scoreboard.getBrackets(i.config.userMode),this.standings=await i.pages.scoreboard.getScoreboard()},async init(){this.$watch("activeBracket",t=>{this.$dispatch("bracket-change",t),this.currentPage=1}),this.update(),setInterval(()=>{this.update()},l)}}));o.start();
